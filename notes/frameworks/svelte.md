# Svelte

<https://svelte.dev/>

> Cybernetically enhanced web apps

## Links

* [Github](https://github.com/sveltejs/svelte)
* [Examples](https://svelte.dev/examples/hello-world)
* [Svelte Origins: A JavaScript Documentary](https://www.youtube.com/watch?v=kMlkCYL9qo0)

## Typescript

[Svelte <3 TypeScript](https://svelte.dev/blog/svelte-and-typescript)

## Svelte Kit

* [SvelteKit â€¢ Web development, streamlined](https://kit.svelte.dev/)

## Examples

### [Saved Examples](https://svelte.dev/apps)

* [Pass Value from Child to Parent](https://svelte.dev/repl/24adfb0a93734265952e2870155aeb49?version=3.43.1)

## Convention

* Capitalize Svelte Component name to differentiate from HTML Tags


## API

* `class SvelteComponent`
  * constructor
  * on
  * set
  * destroy
  * mount
  * bind
  * init
  * claim
  * create

## Template Syntax


* Instantiate Component

  ```js
  import App from './App.svelte';

  const app = new App({
    target: document.body,
    props: {
      answer: 42
    }
  });
  ```

* Interpolation

  ```html
  <h1>Hello {world}</h1>
  ```

* Shorthand Attributes

  ```html
  <img {src}>
  <img src={src}>
  ```

* Import and use component

  ```svelte
  <script>
    import Nested from './Nested.svelte'
  </script>

  <Nested/>
  ```

* Bind DOM events

  ```svelte
  <button on:click={incrementCount}>
  <script>
  function incrementCount()  {}
  </script>
  ```

* Reactive variable declaration

  ```js
  $: doubled = count * 2;
  ```

  > re-run this code whenever any of the referenced values change

  **Note**: Uses [`label` statement](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label)

* Reactive statements / block

  ```js
  $: console.log('the count is ' + count);
  ```

  ```js
  $: {
    console.log('the count is ' + count);
  }
  ```

* Reactivity when mutating object (not assigning) -> assign anyway

  ```js
  // does not work
  numbers.push(numbers.length + 1);
  // works
  numbers = [...numbers, numbers.length + 1];
  ```

  > The updated variable must directly appear on the left hand side of the assignment.

* Declaring Props

  **Parent.Svelte**

  ```svelte
  // pass prop
  <Nested answer={42}/>
  ```

  **Child.Svelte**

  ```svelte
  <script>
    // declare answer as prop
    export let answer;
  </script>
  ```

* Props - Default Value

  ```js
  export let answer = 'a mystery';
  ```

* Props - Spread Props

  ```diff
  - <Info name={pkg.name} version={pkg.version} speed={pkg.speed} website={pkg.website}/>
  + <Info {...pkg}/>
  ```

* Templating Logic - If Blocks

  ```svelte
  {#if user.loggedIn}
    <button on:click={toggle}>
      Log out
    </button>
  {/if}
  ```

* Templating Logic - If/Else Blocks

  ```svelte
  {#if user.loggedIn}
    Log out
  {:else}
    Log in
  {/if}
  ```

  * `#` indicates a block *opening* tag ex. `{#if}`
  * `/` indicates a block *closing* tag ex. `{/if}`
  * `:` indicates a block *continuation* tag ex. `{:else}`

* Templating Logic - Each Loop

  ```svelte
  <script>
    let names = ['kyle','beth','ryan'];
  </script>

  <ol>
    {#each names as name}
      <li>{name}</li>
    {/each}
  </ol>
  ```

* Templating Logic - Each Loop w/ Index

  ```svelte
  <script>
    let names = ['kyle','beth','ryan'];
  </script>

  {#each names as name, i}
  {i + 1}. {name} <br/>
  {/each}
  ```

* Templating Logic - Each Loop w/ Destructuring

  ```svelte
  <script>
    let entries = [{id: 'A'}, {id: 'B'}, {id: 'C'}];
  </script>

  {#each entries as {id}, i}
    {id}{i < entries.length -1 ? ", ": ""}
  {/each}
  ```

* Templating Logic - Each Loop w/ Key

  ```svelte
  <script>
    let names = [{id: 'A'}, {id: 'B'}, {id: 'C'}];
  </script>

  {#each names as , i}
    {id}
  {/each}
  ```

## Compilation

Svelte Component

```html
<h1>Hello world!</h1>
```

Generates

```js
/* App.svelte generated by Svelte v3.59.1 */
import {
  SvelteComponent,
  detach,
  element,
  init,
  insert,
  noop,
  safe_not_equal
} from "svelte/internal";

function create_fragment(ctx) {
  let h1;

  return {
    c() {
      h1 = element("h1");
      h1.textContent = "Hello world!";
    },
    m(target, anchor) {
      insert(target, h1, anchor);
    },
    p: noop,
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching) detach(h1);
    }
  };
}

class App extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment, safe_not_equal, {});
  }
}

export default App;
```


## Questions

* [Can we write typescript inside a svelte component?](https://stackoverflow.com/q/57034573/1366033)

  Add `lang="ts"` to your `script` block

  ```svelte
  <script lang="ts">
    export const hello: string = 'world';
  </script>
  ```

* [Handle form submit with TypeScript types](https://stackoverflow.com/q/64527549/1366033)

  Demo in [Svelte REPL](https://svelte.dev/repl/8eb540552faa4651a398b182fa5cdd48?version=3.24.1)

  ```svelte
  <script lang="ts">
    function handleSubmit(e: SubmitEvent) {
      const formData = new FormData(e.target as HTMLFormElement)
    }
  </script>

  <form on:submit|preventDefault={handleSubmit}>
  ```

* [Can I keep "unused css selector"?](https://stackoverflow.com/q/68499862/1366033)

  Use `global` style attribute

  ```svelte
  <style global>
    .red {
        color: red;
    }
  </style>
  ```

  Use `:global` selector

  ```css
  :global(.red) {
      color: red;
  }
  ```

  Use `:is` selector

  ```css
  :is(.red) {
      color: red;
  }
  ```

* [How to render html in svelte](https://stackoverflow.com/q/57580013/1366033)

  Use [`{@html ...}` expression](https://svelte.dev/docs#template-syntax-html)

  ```svelte
  {@html post.content}
  ```


  