# Svelte

<https://svelte.dev/>

> Cybernetically enhanced web apps

## Links

* [Github](https://github.com/sveltejs/svelte)
* [Examples](https://svelte.dev/examples/hello-world)
* [Svelte Society](https://sveltesociety.dev/)
* [Svelte Origins: A JavaScript Documentary](https://www.youtube.com/watch?v=kMlkCYL9qo0)

## Typescript

* Docs
  * [Svelte <3 TypeScript](https://svelte.dev/blog/svelte-and-typescript)
  * [TypeScript • Docs • Svelte](https://svelte.dev/docs/typescript)
* Issues
  * [Add TypeScript support · Issue #156 · sveltejs/sites](https://github.com/sveltejs/sites/issues/156)
* Fiddles
  * [TS REPL using stackblitz](https://stackblitz.com/edit/svelte-typescript?file=src%2FApp.svelte)
  * [TS REPL using codesandbox](https://codesandbox.io/p/sandbox/distracted-glitter-cnmvsn?file=%2Fsrc%2FApp.svelte%3A5%2C29)

## Svelte Kit

* [SvelteKit • Web development, streamlined](https://kit.svelte.dev/)

## REPL

### [Saved Examples](https://svelte.dev/apps)

* [Pass Value from Child to Parent](https://svelte.dev/repl/24adfb0a93734265952e2870155aeb49?version=3.43.1)

## Resources

* [Getting started with Svelte](https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_getting_started)

## Convention

* Capitalize Svelte Component name to differentiate from HTML Tags


## IDE Support

* [Svelte for Visual Studio](https://marketplace.visualstudio.com/items?itemName=lyu-jason.svelte-vs-2022)
* [Svelte for VS Code](https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode)
* [Svelte for Rider / IntelliJ](https://plugins.jetbrains.com/plugin/12375-svelte)


## API

* `class SvelteComponent`
  * constructor
  * on
  * set
  * destroy
  * mount
  * bind
  * init
  * claim
  * create


## Compilation

Svelte Component

```html
<h1>Hello world!</h1>
```

Generates

```js
/* App.svelte generated by Svelte v3.59.1 */
import {
  SvelteComponent,
  detach,
  element,
  init,
  insert,
  noop,
  safe_not_equal
} from "svelte/internal";

function create_fragment(ctx) {
  let h1;

  return {
    c() {
      h1 = element("h1");
      h1.textContent = "Hello world!";
    },
    m(target, anchor) {
      insert(target, h1, anchor);
    },
    p: noop,
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching) detach(h1);
    }
  };
}

class App extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment, safe_not_equal, {});
  }
}

export default App;
```

## Libraries / Projects

* [svelte-hmr](https://github.com/rixo/svelte-hmr#svelte-hmr) - HMR commons for Svelte 3
* [svelte-vite-starter](https://github.com/baileyherbert/svelte-vite-starter) - Svelte starter with Vite 4, TypeScript, SCSS, Babel, HMR, and ESM

## Questions

* [Can we write typescript inside a svelte component?](https://stackoverflow.com/q/57034573/1366033)

  Add `lang="ts"` to your `script` block

  ```svelte
  <script lang="ts">
    export const hello: string = 'world';
  </script>
  ```

* [Handle form submit with TypeScript types](https://stackoverflow.com/q/64527549/1366033)

  Demo in [Svelte REPL](https://svelte.dev/repl/8eb540552faa4651a398b182fa5cdd48?version=3.24.1)

  ```svelte
  <script lang="ts">
    function handleSubmit(e: SubmitEvent) {
      const formData = new FormData(e.target as HTMLFormElement)
    }
  </script>

  <form on:submit|preventDefault={handleSubmit}>
  ```

* [Can I keep "unused css selector"?](https://stackoverflow.com/q/68499862/1366033)

  Use `global` style attribute

  ```svelte
  <style global>
    .red {
        color: red;
    }
  </style>
  ```

  Use `:global` selector

  ```css
  :global(.red) {
      color: red;
  }
  ```

  Use `:is` selector

  ```css
  :is(.red) {
      color: red;
  }
  ```

  [Styling child](https://svelte.dev/repl/d7f454927ae548d690a05902654dafda?version=3.59.2)

* [How to render html in svelte](https://stackoverflow.com/q/57580013/1366033)

  Use [`{@html ...}` expression](https://svelte.dev/docs#template-syntax-html)

  ```svelte
  {@html post.content}
  ```


* [What does $: mean?](https://stackoverflow.com/q/55830638/1366033)

  [Reactive Declaration](https://github.com/sveltejs/rfcs/blob/master/text/0003-reactive-declarations.md)

  ```js
  let count = 1;
  $: doubled = count * 2;
  ```

  [Destiny Operator](https://youtu.be/AdNJ3fydeao?t=863)

  **See Also**: [The many meanings of $ in Svelte](https://geoffrich.net/posts/svelte-$-meanings/)

* [Debugging with svelte](https://stackoverflow.com/q/57390682/1366033)

  Use https://github.com/sveltejs/svelte-devtools

* [`</script>` inside a string is parsed by the compiler as a closing script tag](https://github.com/sveltejs/svelte/issues/5024)

  Escape the slash

  ```js
  let name = 'abc <\/script>';
  ```

* [Svelte transition between two elements "jumps"](https://stackoverflow.com/q/59882179/1366033)

  Use css grid so both elements don't depend on each other for DOM flow

  ```css
  .grid {
    display: grid;
  }
  .grid > * {
    grid-area: 1/1/2/2;
  }
  ```
  
  [Swap Out Elements • REPL • Svelte](https://svelte.dev/repl/dc1aba49f6ce4366b7bc0efee64a84e8?version=4.0.5)

  Use delay to prevent new element from entering until after out has completed

  ```svelte
  <div in:fade={{ delay: 500}} out:fade={{ duration: 500}} >
  ```

  [Swap Out Elements - Delay • REPL • Svelte](https://svelte.dev/repl/22265f45e3c942a585a50a8df107b732?version=4.0.5)

  **See Also**: [Equivalent of Vue's out-in transition mode](https://github.com/sveltejs/svelte/issues/544)


* [change variable value inside html block](https://stackoverflow.com/q/68393239/1366033)


  Use [`{@const ...}`](https://svelte.dev/docs/special-tags#const)

  ```svelte
  <script>
    const list = ['a','b','c']
  </script>

  <ul>
  {#each list as item}
      {@const isB = item === "b"}
      <li>
        <code>Item: "{item}" | IsB: {isB}</code>
      </li>
  {/each}
  </ul>
  ```

  [Demo in REPL](https://svelte.dev/repl/a42d598c79f3493ebed2fbf96f695336?version=4.0.5)


* [difference between svelte store and svelte context](https://stackoverflow.com/q/74361924/1366033)

  * A context is data that is inherited within a component hierarchy
  * A store encapsulates reactivity via a subscription system


* [TypeScript get Svelte component's prop type](https://stackoverflow.com/q/70103438/1366033)

  Use [`ComponentProps`](https://svelte.dev/docs/typescript#types-componentprops)

  ```svelte
  <script lang="ts">
    import type { ComponentProps } from 'svelte';
    import Animal from 'animals';
    // The below has the types of all props on the Animal component now
    export type AnimalPropTypes = ComponentProps<Animal>;
  </script>
  ```

  [Demo in StackBlitz](https://stackblitz.com/edit/svelte-typed-props?file=src%2FCard.svelte,src%2FApp.svelte)

  [This fixes like all my problems with Svelte typescript](https://twitter.com/BertBengtson/status/1679887855307374593)

* [first, last, even, odd field in {#each} loop](https://github.com/sveltejs/svelte/issues/7473)

  Use [`#each` block](https://svelte.dev/docs/logic-blocks#each)

  ```svelte
  <script>
    const list = ['A', 'B', 'C']
  </script>

  {#each list as item, i}
    {@const isLast = i === list.length - 1}
    {item}{#if !isLast},{/if}
  {/each}
  ```

  [Each (Last) in REPL](https://svelte.dev/repl/86cb267ba7fb41898c9ffc4e9d7e506a?version=4.0.5)

